<html>
<head>
  <meta charset="utf-8">
  <title>blockd3: visual data-driven programming with d3 and blockly</title>
  <link href="http://fonts.googleapis.com/css?family=ABeeZee" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="./css/style.css"/>
  <script type="text/javascript" src="./lib/b4/lib/underscore-min.js"></script>
  

  <link rel="stylesheet" href="./lib/cm/lib/codemirror.css">
  <link rel="stylesheet" href="./lib/cm/theme/elegant.css">
  <script src="./lib/cm/lib/codemirror.js"></script>
  <script src="./lib/cm/mode/javascript/javascript.js"></script>
  <script src="./lib/cm/mode/xml/xml.js"></script>

  
  <script type="text/javascript" src="./js/BlobBuilder.min.js"></script>
  <script type="text/javascript" src="./js/FileSaver.min.js"></script>
  <script type="text/javascript" src="./lib/d3/d3.v2.min.js"></script>
  <script type="text/javascript" src="./js/editor.js"></script>
  <script type="text/javascript" src="./js/new.editor.js"></script>
</head>
<body>
<a href="https://github.com/bollwyvl/blockd3">
    <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub">
</a>
  <table height="100%" width="100%">
    <tr>
      <td colspan="2">
         <div id="powered_by">
            Built with <a href="http://d3js.org">d3</a>, <a href="https://github.com/bollwyvl/blockd3">b4</a> &amp; <a href="http://code.google.com/p/blockly">Blockly</a>
        </div>
        <h1>
            <a href="https://github.com/bollwyvl/blockd3">Blockd3</a> Demo
        </h1>

      </td>
    </tr>
    <tr>
      <td colspan="2">
        <table>
          <tr id="tabRow" height="1em">
            <td id="tab_blocks" class="tabon" onclick="tabClick(this.id)">blocks</td>
            <td>&nbsp;</td>
            <td id="tab_javascript" class="taboff" onclick="tabClick(this.id)">javascript</td>
            <td>&nbsp;</td>
            <td id="tab_xml" class="taboff" onclick="tabClick(this.id)">xml</td>
            <td width="65%">
              <button onclick="discard()">Discard</button>
              <button onclick="save()">Save XML</button>
              <button id="fakeload">Load XML</button>
              <input type="file" id="load" style="display: none;"/>
              <button class="launch" onclick="runJS()">Run Program</button>
            </td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td height="99%">
        <iframe id="content_blocks" src="./frame.html"></iframe>
        <div id="content_javascript">
          <textarea id="textarea_javascript"></textarea>
        </div>
        <div id="content_xml">
          <textarea id="textarea_xml"></textarea>
        </div>
      </td>
      <td width="400">
        <div id="content_d3">
            <svg width="360" height="180">
                <g><circle class="little" cx="180" cy="45" r="12"></circle></g>
                <g><circle class="little" cx="60" cy="90" r="12"></circle></g>
                <g><circle class="little" cx="300" cy="135" r="12"></circle></g>
            </svg>
        </div>
      </td>
    </tr>
  </table>
  <script>
      var editors = {
          javascript: undefined,
          xml: undefined
      };

      function initialize_editors(){
          _.map(editors, function(editor, language){
              if(editor){
                 return; 
              }
              editors[language] = CodeMirror.fromTextArea(
                  document.getElementById("textarea_"+language),
                  {
                      lineNumbers: true,
                      matchBrackets: true,
                      mode: language,
                      lineWrapping: true,
                      readOnly: true,
                      theme: "elegant",
                  });
                  editors[language].
                      setSize("100%", "100%");
          });
      }
      
      initialize_editors();
  </script>
</body>
</html>
